INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/api/user/321bc1e3-5f84-4847-aaee-c458d1e6e3a6/games "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/api/user/321bc1e3-5f84-4847-aaee-c458d1e6e3a6/games?variant=standard "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/api/user/321bc1e3-5f84-4847-aaee-c458d1e6e3a6/games?result=win "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/api/user/321bc1e3-5f84-4847-aaee-c458d1e6e3a6/games?result=loss "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/moves/legal "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/moves/legal "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/moves/legal "HTTP/1.1 400 Bad Request"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/moves/legal "HTTP/1.1 404 Not Found"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/moves/all_legal "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 400 Bad Request"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/api/leaderboard/standard "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/api/leaderboard/standard "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/api/user/test-google-id "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/api/user/non-existent-id "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/api/user/test-google-id "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/api/user/non-existent-id "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
ERROR    sqlalchemy.pool.impl.AsyncAdaptedQueuePool:base.py:376 Exception terminating connection <AdaptedConnection <aiosqlite.core.Connection object at 0x7bbe7aeb56d0>>
Traceback (most recent call last):
  File "/home/albin/projects/v_chess/venv/lib/python3.14/site-packages/aiosqlite/core.py", line 206, in close
    await self._execute(self._conn.close)
  File "/home/albin/projects/v_chess/venv/lib/python3.14/site-packages/aiosqlite/core.py", line 160, in _execute
    return await future
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError: Cancelled via cancel scope 7bbe7afb74d0 by <Task pending name='anyio.from_thread.BlockingPortal._call_func' coro=<BlockingPortal._call_func() running at /home/albin/projects/v_chess/venv/lib/python3.14/site-packages/anyio/from_thread.py:253> cb=[TaskGroup._spawn.<locals>.task_done() at /home/albin/projects/v_chess/venv/lib/python3.14/site-packages/anyio/_backends/_asyncio.py:805]>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albin/projects/v_chess/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py", line 372, in _close_connection
    self._dialect.do_terminate(connection)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/home/albin/projects/v_chess/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py", line 718, in do_terminate
    self.do_close(dbapi_connection)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/albin/projects/v_chess/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py", line 721, in do_close
    dbapi_connection.close()
    ~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/albin/projects/v_chess/venv/lib/python3.14/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 317, in close
    self.await_(self._connection.close())
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/albin/projects/v_chess/venv/lib/python3.14/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/home/albin/projects/v_chess/venv/lib/python3.14/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/albin/projects/v_chess/venv/lib/python3.14/site-packages/aiosqlite/core.py", line 214, in close
    await future
asyncio.exceptions.CancelledError: Cancelled via cancel scope 7bbe7afb74d0 by <Task pending name='anyio.from_thread.BlockingPortal._call_func' coro=<BlockingPortal._call_func() running at /home/albin/projects/v_chess/venv/lib/python3.14/site-packages/anyio/from_thread.py:253> cb=[TaskGroup._spawn.<locals>.task_done() at /home/albin/projects/v_chess/venv/lib/python3.14/site-packages/anyio/_backends/_asyncio.py:805]>
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/game/new "HTTP/1.1 200 OK"
